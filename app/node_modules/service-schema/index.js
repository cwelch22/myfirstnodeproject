'use strict';

var Promise = require('bluebird');
var fs = Promise.promisifyAll(require('fs'));
var schema = {};

function init() {
	var dir = './app/schema';

	return fs.readdirAsync(dir).map(function(filename) {
		var prefix = filename.split('.')[0];

		return fs.readFileAsync(dir + '/' + filename, 'utf8').then(function(content) {
			schema[prefix] = JSON.parse(content);
		});
	});
}

module.exports = {
	init: init,
	original: schema
};
